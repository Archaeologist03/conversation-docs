<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: CallManager</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: CallManager</h1>

    




<section>

<header>
    
        <h2>CallManager</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="CallManager"><span class="type-signature"></span>new CallManager<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    A single CallManager Object.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line14">line 14</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="createCall"><span class="type-signature"></span>createCall<span class="signature">(params)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="Member.html">Member</a>>}</span></h4>

    



<div class="description">
    Create audio call with the given user (id or name)

<pre>

--> conversation:invite
     payload = {
         type: 'conversation:invite',
         user_id: params.id,
         user_name: params.user_name,
         media: { audio: { mute: false, earmuff: false } }
     }

<-- [ack] conversation:invite:success

<-- member:invited

</pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Member.html">Member</a></span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id or username</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">the id or the username of the user to invite</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>media</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">the media type (audio)
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>audio</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">the media type
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mute</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">start the callee muted</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>earmuff</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">start the callee earmuffed</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line69">line 69</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="Member.html">Member</a>></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>function CallUser() {
 //user_name or user_id
	 conversation.callManager.createCall({
			id: user_id,
			user_name: user_name,
			media: { audio: { mute: false, earmuff: false } }
		})
		.then(function(reply) {
			console.log("Audio " + reply.state + " user: " + user_id + " " + user_name);
			conversation.enableAudio();
		}).catch(function(error) {
			console.log(error);
		});
} //if you are a member in a conversation you can directly enable audio to wait for other members to do so and start a call directly</code></pre>



        
            

    

    <h4 class="name" id="disableAudio"><span class="type-signature"></span>disableAudio<span class="signature">(params)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Disable audio partcipation in the conversation for this application
<pre>

--> rtc:terminate
       payload = {
         type: 'rtc:terminate',
         from: &lt;member_id&gt;, //optional - If no member_id then it refers to the mix of conversation participants
         rtc_id: &lt;rtc_id&gt;,
         cid: &lt;conversation_id&gt;,
         body: {
              rtc_id: &lt;rtc_id&gt;
             stream_id: &lt;stream_id&gt;
         }  
       }

<-- [ack] rtc:terminate:success

</pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">rtc params
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>rtc_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">it corrisponde to the call id</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stream_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">If there is no stream_id then it is a request to terminate all streams in the rtc_id collection.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line278">line 278</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>function disableAudio() {
  conversation.callManager.disableAudio()
     .then(function(response) {
      }).catch(function(error) {
          console.log(error);
      });
}</code></pre>



        
            

    

    <h4 class="name" id="enableAudio"><span class="type-signature"></span>enableAudio<span class="signature">(params)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Enable audio participation in the conversation for this application (requires WebRTC)
<pre>

--> rtc:new
     payload = {
      type: 'rtc:new',
      cid: &lt;conversation_id&gt;,
      from: &lt;member_id&gt;,
      body: {
          offer: &lt;offer_sdp&gt;,
          label: params.label
      }   
     }

<-- [ack] rtc:new:success

<-- rtc:answer

</pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">rtc params
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Label is an application defined tag, eg. ‘fullscreen’ or</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line120">line 120</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>Enable audio in this conversation
function enableAudio() {
  conversation.callManager.enableAudio()
     .then(function(response) {
      }).catch(function(error) {
          console.log(error);
      });
}</code></pre>



        
            

    

    <h4 class="name" id="ringingStart"><span class="type-signature"></span>ringingStart<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Send start ringing event
<pre>

--> audio:ringing:start
     payload = {}

<-- [ack] audio:ringing:start:success

<-- audio:ringing:start
     payload = { cid: &lt;conversation_id&gt; }

</pre>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line360">line 360</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>expect the most convenient user identification (member id, username etc) to findout who's ringing</li>
        </ul>
    </dd>
    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>Send ringing event
function ringingStart() {
  conversation.callManager.ringingStart()
     .then(function(response) {
      }).catch(function(error) {
          console.log(error);
      });
}

conversation.on('audio:ringing:start', function(data)){
console.log("ringing");
}</code></pre>



        
            

    

    <h4 class="name" id="ringingStop"><span class="type-signature"></span>ringingStop<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Send stop ringing event

<pre>

--> audio:ringing:stop
     payload = {}

<-- [ack] audio:ringing:stop:success

<-- audio:ringing:stop
     payload = { cid: &lt;conversation_id&gt; }

</pre>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="call_manager.js.html">call_manager.js</a>, <a href="call_manager.js.html#line413">line 413</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>for the event audio:ringing:stop: expect the most convenient user identification (member id, username etc) to findout who's the sender</li>
        </ul>
    </dd>
    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>Send ringing event
function ringingStop() {
  conversation.callManager.ringingStop()
     .then(function(response) {
      }).catch(function(error) {
          console.log(error);
      });
}

conversation.on('audio:ringing:stop', function(data)){
console.log("ringing stopped");
}</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Application.html">Application</a></li><li><a href="CallManager.html">CallManager</a></li><li><a href="Conversation.html">Conversation</a></li><li><a href="ConversationClient.html">ConversationClient</a></li><li><a href="Event.html">Event</a></li><li><a href="Member.html">Member</a></li><li><a href="Text.html">Text</a></li></ul><h3>Events</h3><ul><li><a href="Application.html#event:member:invited">member:invited</a></li><li><a href="Application.html#event:member:joined">member:joined</a></li><li><a href="Application.html#event:member:media">member:media</a></li><li><a href="Conversation.html#event:event:delete">delete</a></li><li><a href="Conversation.html#event:text">text</a></li><li><a href="Conversation.html#event:member:invited">member:invited</a></li><li><a href="Conversation.html#event:member:joined">member:joined</a></li><li><a href="Conversation.html#event:member:left">member:left</a></li><li><a href="Conversation.html#event:text:seen">text:seen</a></li><li><a href="Conversation.html#event:text:typing:off">text:typing:off</a></li><li><a href="Conversation.html#event:text:typing:on">text:typing:on</a></li><li><a href="ConversationClient.html#event:connecting">connecting</a></li><li><a href="ConversationClient.html#event:disconnect">disconnect</a></li><li><a href="ConversationClient.html#event:error">error</a></li><li><a href="ConversationClient.html#event:ready">ready</a></li><li><a href="ConversationClient.html#event:reconnect">reconnect</a></li><li><a href="ConversationClient.html#event:reconnecting">reconnecting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ConversationClientErrorTypes">ConversationClientErrorTypes</a></li><li><a href="global.html#me">me</a></li><li><a href="global.html#NexmoApiError">NexmoApiError</a></li><li><a href="global.html#NexmoClientError">NexmoClientError</a></li><li><a href="global.html#NexmoClientErrorTypes">NexmoClientErrorTypes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Oct 05 2017 15:28:56 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>